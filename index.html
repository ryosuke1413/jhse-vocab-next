<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vocab Trainer 1500</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="header">
    <div class="brand">
      <div class="logo">VT</div>
      <div class="titles">
        <h1>Vocab Trainer 1500</h1>
        <p class="sub">3難易度 ×（4択 / 打ち込み / ミックス）</p>
      </div>
    </div>

    <div class="status">
      <div class="pill">
        <span class="label">ランク</span>
        <span id="rankText" class="value">1</span>
      </div>
      <div class="pill">
        <span class="label">直近正答率</span>
        <span id="accText" class="value">--%</span>
      </div>
      <button id="resetBtn" class="btn ghost" title="学習履歴を初期化">リセット</button>
    </div>
  </header>

  <main class="main">
    <section class="card" id="home">
      <h2>出題を選択</h2>

      <div class="grid">
        <div class="field">
          <label>難易度</label>
          <select id="levelSel">
            <option value="1">Lv1（500語）</option>
            <option value="2">Lv2（500語）</option>
            <option value="3">Lv3（500語）</option>
          </select>
          <p class="hint">※ランクに連動して自動でおすすめ難易度を提示します</p>
        </div>

        <div class="field">
          <label>方向</label>
          <select id="dirSel">
            <option value="ja2en">日本語 → 英語</option>
            <option value="en2ja">英語 → 日本語</option>
          </select>
          <p class="hint">4択・打ち込みで使用</p>
        </div>

        <div class="field">
          <label>モード</label>
          <select id="modeSel">
            <option value="mc10">4択10問</option>
            <option value="type10">打ち込み10問</option>
            <option value="mix10">ミックス10問（動詞形×5 + 系列×5）</option>
          </select>
          <p class="hint">ミックスは方向固定：動詞形は形当て／系列は（日→英）</p>
        </div>
      </div>

      <div class="actions">
        <button id="startBtn" class="btn primary">開始</button>
      </div>

      <details class="note">
        <summary>ランク昇降格ルール</summary>
        <ul>
          <li>直近 <b>50問</b> の正答率（ローリング）で判定</li>
          <li><b>昇格</b>：直近正答率 ≥ <b>85%</b> かつ履歴が <b>30問</b> 以上</li>
          <li><b>降格</b>：直近正答率 &lt; <b>70%</b>（履歴が <b>30問</b> 以上）</li>
          <li>判定は「10問セット終了時」に行います</li>
        </ul>
      </details>
    </section>

    <section class="card hidden" id="quiz">
      <div class="quizTop">
        <div class="meta">
          <div class="kpi"><span class="label">モード</span><span id="modeText" class="value">--</span></div>
          <div class="kpi"><span class="label">難易度</span><span id="levelText" class="value">--</span></div>
          <div class="kpi"><span class="label">進捗</span><span id="progText" class="value">1 / 10</span></div>
        </div>
        <button id="quitBtn" class="btn ghost">中断</button>
      </div>

      <div class="prompt">
        <div id="promptMain" class="promptMain">--</div>
        <div id="promptSub" class="promptSub"> </div>
      </div>

      <div id="mcArea" class="mcArea hidden"></div>

      <form id="typeArea" class="typeArea hidden" autocomplete="off">
        <input id="typeInput" class="typeInput" type="text"
               inputmode="latin" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
               placeholder="答えを入力して Enter" />
        <button class="btn primary" type="submit">決定</button>
      </form>

      <div id="feedback" class="feedback hidden"></div>

      <div class="bottomBar">
        <div class="score">
          <span>スコア</span>
          <b id="scoreText">0</b>
        </div>
        <button id="nextBtn" class="btn primary hidden">次へ</button>
      </div>
    </section>

    <section class="card hidden" id="result">
      <h2>結果</h2>
      <div class="resultGrid">
        <div class="resultBox">
          <div class="big" id="resultScore">0 / 10</div>
          <div class="small" id="resultAcc">正答率 --%</div>
        </div>
        <div class="resultBox">
          <div class="big" id="rankAfter">ランク --</div>
          <div class="small" id="rankNote">--</div>
        </div>
      </div>

      <div class="review">
        <h3>復習</h3>
        <div id="reviewList" class="reviewList"></div>
      </div>

      <div class="actions">
        <button id="backHomeBtn" class="btn">トップへ</button>
        <button id="retryBtn" class="btn primary">もう一度</button>
      </div>
    </section>
  </main>

  <footer class="footer">
    <span>words.json: 1500 words</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>
