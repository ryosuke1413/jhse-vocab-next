<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JHSE Vocab</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="wrap header">
    <div class="titleRow">
      <h1>JHSE Vocab</h1>
      <div class="rankChip" id="rankChip">RANK</div>
    </div>

    <section class="card rankPanel">
      <div class="rankTop">
        <div>
          <div class="muted">現在ランク</div>
          <div class="rankName" id="rankName">-</div>
        </div>
        <div class="rankRight">
          <div class="muted">次のランクまで（累計正解）</div>
          <div class="rankRemain" id="rankRemain">-</div>
        </div>
      </div>

      <div class="bar" aria-label="rank progress">
        <div class="barFill" id="barFill" style="width:0%"></div>
      </div>

      <div class="rankHint">
        <span class="pill" id="qTypePill">-</span>
        <span class="pill" id="progress">0 / 10</span>
      </div>
    </section>
  </header>

  <main class="wrap">
    <!-- Setup -->
    <section class="card" id="setup">
      <div class="setupGrid">
        <div class="field">
          <label>ユーザ名</label>
          <div class="userRow">
            <input class="input" id="userName" maxlength="20" placeholder="例：ryosuke" />
            <button class="btn" id="saveUserBtn">保存</button>
          </div>
        </div>

        <div class="field">
          <label>難易度</label>
          <select id="level"></select>
        </div>

        <div class="field">
          <label>出題形式</label>
          <select id="quizType">
            <option value="mc">4択（10問）</option>
            <option value="typing">打ち込み（10問）</option>
            <option value="mix">ミックス（10問：形5 + 系5）</option>
          </select>
        </div>

        <div class="field">
          <label>出題方向（4択 / 打ち込み）</label>
          <select id="direction">
            <option value="en_to_ja">英語 → 日本語</option>
            <option value="ja_to_en">日本語 → 英語</option>
          </select>
          <div class="muted small" id="directionHint">ミックスは固定（形問題は英語ベース／系問題は日→英）</div>
        </div>

        <div class="statCard">
          <div class="statLabel">累計 回答数</div>
          <div class="statValue" id="totalAns">0</div>
        </div>
        <div class="statCard">
          <div class="statLabel">累計 正解数</div>
          <div class="statValue" id="totalOk">0</div>
        </div>
        <div class="statCard">
          <div class="statLabel">直近 正答率（50問）</div>
          <div class="statValue" id="acc">0%</div>
        </div>
        <div class="statCard">
          <div class="statLabel">ミス単語数</div>
          <div class="statValue" id="missCnt">0</div>
        </div>

        <div class="actions">
          <button class="btn primary" id="startBtn">スタート</button>
          <button class="btn" id="reviewBtn">ミス復習</button>
          <button class="btn danger" id="resetBtn">初期化</button>
        </div>
      </div>
    </section>

    <!-- Quiz -->
    <section class="card hidden" id="quiz">
      <div class="quizTop">
        <div class="qText" id="qText">-</div>
        <div class="muted small" id="typeMeaning"></div>
      </div>

      <div id="choices" class="choices"></div>

      <div id="typing" class="typing hidden">
        <div class="typeRow">
          <input id="typeInput" class="input" autocomplete="off" autocapitalize="none" spellcheck="false" inputmode="latin" placeholder="ここに入力" />
          <button id="checkBtn" class="btn primary">提出</button>
        </div>
        <div class="typeExample muted small" id="typeExample"></div>
      </div>

      <div class="feedback" id="feedback"></div>

      <div class="quizActions">
        <button class="btn" id="backBtn">設定に戻る</button>
        <button class="btn" id="quitBtn">中断</button>
        <button class="btn primary" id="nextBtn">次へ</button>
      </div>
    </section>

    <!-- Result -->
    <section class="card hidden" id="result">
      <div class="resultTop">
        <div class="resultTitle">結果</div>
        <div class="resultText" id="resultText">-</div>
      </div>

      <div class="missPanel">
        <div class="missHead">
          <div class="missTitle">今回ミスした単語</div>
          <button class="btn" id="retryMissBtn">ミスだけもう一度</button>
        </div>
        <div class="missList" id="missList"></div>
      </div>

      <div class="actions">
        <button class="btn primary" id="startBtn2">もう一度（同条件）</button>
        <button class="btn" id="backBtn2">設定に戻る</button>
      </div>
    </section>
  </main>

  <footer class="wrap footer muted small">
    ローカル保存（LocalStorage）を使用します。GitHub Pagesでそのまま動作します。
  </footer>

  <script src="./app.js"></script>
</body>
</html>
